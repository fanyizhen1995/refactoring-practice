## Chapter 006 重新组织函数

### Extract Method

- 过长函数、需要注释的代码，放进独立函数中

#### 做法

1. 创造一个新函数，根据这个函数的意图来命名（做什么）

1. 提炼出来的代码从原函数复制到新建的目标函数

1. 检查源代码，看是否有作用域限于源函数的变量（局部变量和源函数参数）

1. 看是否有代码段里的临时变量，有就在目标函数里声明为临时变量

1. 看是否有任何局部代码被它改变，如果有，看是否能提取为一个查询，并将结果赋值给相关变量

1. 需要读取的局部变量，当作参数传给目标函数

1. 处理完所有局部变量后编译

1. 源函数中，将被提炼代码段替换为对目标函数的调用

1. 编译测试


- 要点

    1. 局部变量
    
### Inline Method

内联两个函数

- 该函数内部代码和函数名一样清晰，消除这个函数

- 组织不合理的一群函数，内联到一个大函数，重新组织

#### 做法

1. 检查函数确定不具备多态性

1. 找出这个函数所有的被调用点

1. 替换成函数本体

1. 编译测试

1. 删除函数定义


### Inline Temp

- 只赋值了一次的临时变量，将其替换为对它赋值的表达式本身

#### 做法

1. 检查赋值语句，确保等号右边无副作用

1. 将临时变量声明为final，编译测试是否真的只赋值了一次

1. 找到临时变量的所有引用点，进行替换

1. 每次修改完，编译测试

1. 修改完所有引用点，删除变量

1. 编译测试
## Chapter001

- 重构第一步：建立可靠的测试环境

### 安全步骤

1. 独立函数

    1. 找出函数内的局部变量和参数
    
    1. 不被修改的变量当程参数传入新的函数
    
    1. 只有一个被修改的变量被当成返回值
   
1. 重命名

1. 函数应该放在他所使用的数据所处的对象里

1. 搬移函数后改动所有对旧函数的引用

1. 去掉临时变量，利用查询函数替代

1. 重构时不需要担心影响性能，优化时才需要担心

1. 不要在另一个对象的属性基础上运用switch语句

1. 根据该对象变化而变化的所有东西，应放到该对象中

1. 多态取代switch，对于对象可能存在会变化分类的情况，运用state模式来控制对象变化

### 总结
 
重构的节奏：测试 -> 小修改 -> 测试 -> 小修改 -> ...